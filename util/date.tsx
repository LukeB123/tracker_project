"use server";

// import sql from "better-sqlite3";
const sql = require("better-sqlite3");

const db = sql("trackers.db");

export type TWeekProps = {
  week_commencing: string;
  weekIndex: 1 | 2 | 3 | 4 | 5;
  monthYearString: string;
  monthIndex: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12;
  year: number;
  total_working_days: 0 | 1 | 2 | 3 | 4 | 5;
};

export async function getWeeks(): Promise<TWeekProps[]> {
  await new Promise((resolve) => setTimeout(resolve, 2000));

  //   return db.prepare("SELECT * FROM date ORDER BY date").all();
  const weeks = [
    {
      week_commencing: "2024-03-30",
      weekIndex: 1,
      monthYearString: "Apr 2024",
      monthIndex: 4,
      year: 2024,
      total_working_days: 4,
    },
    {
      week_commencing: "2024-04-06",
      weekIndex: 2,
      monthYearString: "Apr 2024",
      monthIndex: 4,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-04-13",
      weekIndex: 3,
      monthYearString: "Apr 2024",
      monthIndex: 4,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-04-20",
      weekIndex: 4,
      monthYearString: "Apr 2024",
      monthIndex: 4,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-04-27",
      weekIndex: 1,
      monthYearString: "May 2024",
      monthIndex: 5,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-05-04",
      weekIndex: 2,
      monthYearString: "May 2024",
      monthIndex: 5,
      year: 2024,
      total_working_days: 4,
    },
    {
      week_commencing: "2024-05-11",
      weekIndex: 3,
      monthYearString: "May 2024",
      monthIndex: 5,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-05-18",
      weekIndex: 4,
      monthYearString: "May 2024",
      monthIndex: 5,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-05-25",
      weekIndex: 5,
      monthYearString: "May 2024",
      monthIndex: 5,
      year: 2024,
      total_working_days: 4,
    },
    {
      week_commencing: "2024-06-01",
      weekIndex: 1,
      monthYearString: "Jun 2024",
      monthIndex: 6,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-06-08",
      weekIndex: 2,
      monthYearString: "Jun 2024",
      monthIndex: 6,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-06-15",
      weekIndex: 3,
      monthYearString: "Jun 2024",
      monthIndex: 6,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-06-22",
      weekIndex: 4,
      monthYearString: "Jun 2024",
      monthIndex: 6,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-06-29",
      weekIndex: 1,
      monthYearString: "Jul 2024",
      monthIndex: 7,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-07-06",
      weekIndex: 2,
      monthYearString: "Jul 2024",
      monthIndex: 7,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-07-13",
      weekIndex: 3,
      monthYearString: "Jul 2024",
      monthIndex: 7,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-07-20",
      weekIndex: 4,
      monthYearString: "Jul 2024",
      monthIndex: 7,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-07-27",
      weekIndex: 5,
      monthYearString: "Jul 2024",
      monthIndex: 7,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-08-03",
      weekIndex: 1,
      monthYearString: "Aug 2024",
      monthIndex: 8,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-08-10",
      weekIndex: 2,
      monthYearString: "Aug 2024",
      monthIndex: 8,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-08-17",
      weekIndex: 3,
      monthYearString: "Aug 2024",
      monthIndex: 8,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-08-24",
      weekIndex: 4,
      monthYearString: "Aug 2024",
      monthIndex: 8,
      year: 2024,
      total_working_days: 4,
    },
    {
      week_commencing: "2024-08-31",
      weekIndex: 1,
      monthYearString: "Sep 2024",
      monthIndex: 9,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-09-07",
      weekIndex: 2,
      monthYearString: "Sep 2024",
      monthIndex: 9,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-09-14",
      weekIndex: 3,
      monthYearString: "Sep 2024",
      monthIndex: 9,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-09-21",
      weekIndex: 4,
      monthYearString: "Sep 2024",
      monthIndex: 9,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-09-28",
      weekIndex: 1,
      monthYearString: "Oct 2024",
      monthIndex: 10,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-10-05",
      weekIndex: 2,
      monthYearString: "Oct 2024",
      monthIndex: 10,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-10-12",
      weekIndex: 3,
      monthYearString: "Oct 2024",
      monthIndex: 10,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-10-19",
      weekIndex: 4,
      monthYearString: "Oct 2024",
      monthIndex: 10,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-10-26",
      weekIndex: 5,
      monthYearString: "Oct 2024",
      monthIndex: 10,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-11-02",
      weekIndex: 1,
      monthYearString: "Nov 2024",
      monthIndex: 11,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-11-09",
      weekIndex: 2,
      monthYearString: "Nov 2024",
      monthIndex: 11,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-11-16",
      weekIndex: 3,
      monthYearString: "Nov 2024",
      monthIndex: 11,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-11-23",
      weekIndex: 4,
      monthYearString: "Nov 2024",
      monthIndex: 11,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-11-30",
      weekIndex: 1,
      monthYearString: "Dec 2024",
      monthIndex: 12,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-12-07",
      weekIndex: 2,
      monthYearString: "Dec 2024",
      monthIndex: 12,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-12-14",
      weekIndex: 3,
      monthYearString: "Dec 2024",
      monthIndex: 12,
      year: 2024,
      total_working_days: 5,
    },
    {
      week_commencing: "2024-12-21",
      weekIndex: 4,
      monthYearString: "Dec 2024",
      monthIndex: 12,
      year: 2024,
      total_working_days: 3,
    },
    {
      week_commencing: "2024-12-28",
      weekIndex: 1,
      monthYearString: "Jan 2025",
      monthIndex: 1,
      year: 2025,
      total_working_days: 4,
    },
    {
      week_commencing: "2025-01-04",
      weekIndex: 2,
      monthYearString: "Jan 2025",
      monthIndex: 1,
      year: 2025,
      total_working_days: 5,
    },
    {
      week_commencing: "2025-01-11",
      weekIndex: 3,
      monthYearString: "Jan 2025",
      monthIndex: 1,
      year: 2025,
      total_working_days: 5,
    },
    {
      week_commencing: "2025-01-18",
      weekIndex: 4,
      monthYearString: "Jan 2025",
      monthIndex: 1,
      year: 2025,
      total_working_days: 5,
    },
    {
      week_commencing: "2025-01-25",
      weekIndex: 5,
      monthYearString: "Jan 2025",
      monthIndex: 1,
      year: 2025,
      total_working_days: 5,
    },
    {
      week_commencing: "2025-02-01",
      weekIndex: 1,
      monthYearString: "Feb 2025",
      monthIndex: 2,
      year: 2025,
      total_working_days: 5,
    },
    {
      week_commencing: "2025-02-08",
      weekIndex: 2,
      monthYearString: "Feb 2025",
      monthIndex: 2,
      year: 2025,
      total_working_days: 5,
    },
    {
      week_commencing: "2025-02-15",
      weekIndex: 3,
      monthYearString: "Feb 2025",
      monthIndex: 2,
      year: 2025,
      total_working_days: 5,
    },
    {
      week_commencing: "2025-02-22",
      weekIndex: 4,
      monthYearString: "Feb 2025",
      monthIndex: 2,
      year: 2025,
      total_working_days: 5,
    },
    {
      week_commencing: "2025-03-01",
      weekIndex: 1,
      monthYearString: "Mar 2025",
      monthIndex: 3,
      year: 2025,
      total_working_days: 5,
    },
    {
      week_commencing: "2025-03-08",
      weekIndex: 2,
      monthYearString: "Mar 2025",
      monthIndex: 3,
      year: 2025,
      total_working_days: 5,
    },
    {
      week_commencing: "2025-03-15",
      weekIndex: 3,
      monthYearString: "Mar 2025",
      monthIndex: 3,
      year: 2025,
      total_working_days: 5,
    },
    {
      week_commencing: "2025-03-22",
      weekIndex: 4,
      monthYearString: "Mar 2025",
      monthIndex: 3,
      year: 2025,
      total_working_days: 5,
    },
  ];

  const sortedWeeks = weeks.sort((a, b) =>
    a.week_commencing > b.week_commencing ? 1 : -1
  );

  return sortedWeeks as TWeekProps[];
}
